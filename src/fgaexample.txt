// Step 01. Install the SDK
// Install the SDK by following the steps at https://docs.fga.dev/integration/install-sdk
// npm i @openfga/sdk

// Step 01. Initialize the SDK
const { CredentialsMethod, OpenFgaClient } = require('@openfga/sdk'); // OR import { CredentialsMethod, OpenFgaClient } from '@openfga/sdk';

const fgaClient = new OpenFgaClient({
    apiUrl: 'https://api.us1.fga.dev',
    storeId: 'XXXXX',
    // authorizationModelId: 'YOUR_MODEL_ID', // Optionally, you can specify a model id to target, which can improve latency
    credentials: {
      method: CredentialsMethod.ClientCredentials,
      config: {
        apiTokenIssuer: "auth.fga.dev",
        apiAudience: 'https://api.us1.fga.dev/',
        clientId: 'XXXXX',
        clientSecret: 'XXXXXXX',
      },
    }
});

// Step 02. Check for access
const { allowed } = await fgaClient.check({
    user: 'user:anne',
    relation: 'can_view',
    object: 'document:roadmap',
});
