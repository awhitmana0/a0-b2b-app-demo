// Step 01. Install the SDK
// Install the SDK by following the steps at https://docs.fga.dev/integration/install-sdk
// npm i @openfga/sdk

// Step 01. Initialize the SDK
const { CredentialsMethod, OpenFgaClient } = require('@openfga/sdk'); // OR import { CredentialsMethod, OpenFgaClient } from '@openfga/sdk';

const fgaClient = new OpenFgaClient({
    apiUrl: 'https://api.us1.fga.dev',
    storeId: '01JYN40ZY82EECZPPQ3D2M3WMN',
    // authorizationModelId: 'YOUR_MODEL_ID', // Optionally, you can specify a model id to target, which can improve latency
    credentials: {
      method: CredentialsMethod.ClientCredentials,
      config: {
        apiTokenIssuer: "auth.fga.dev",
        apiAudience: 'https://api.us1.fga.dev/',
        clientId: '4U6sffGJf4LS3P6gqMlbYs7jYgHZSBWS',
        clientSecret: 'cltjSy0izBf9PjaxDUuvJXijYuTDeQJqB-q49FllNw9v_NCop5x0fT0vYWFqtV4x',
      },
    }
});

// Step 02. Check for access
const { allowed } = await fgaClient.check({
    user: 'user:anne',
    relation: 'can_view',
    object: 'document:roadmap',
});